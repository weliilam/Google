<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç½‘ç»œè¯·æ±‚åˆ†æå™¨ - ç®€å•æµ‹è¯•</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            padding: 40px;
            max-width: 800px;
            margin: 0 auto;
        }
        h1 { color: #1976d2; margin-bottom: 20px; }
        .section { margin-bottom: 30px; }
        button {
            padding: 12px 24px;
            background: #1976d2;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        button:hover { background: #1565c0; }
        .info {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .info p { margin-bottom: 10px; line-height: 1.6; }
        .info code {
            background: #fff;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
        }
        .status {
            padding: 15px;
            border-radius: 4px;
            margin-top: 20px;
            font-weight: bold;
        }
        .status.success { background: #e8f5e9; color: #2e7d32; }
        .status.error { background: #ffebee; color: #c62828; }
    </style>
</head>
<body>
    <h1>ğŸŒ ç½‘ç»œè¯·æ±‚åˆ†æå™¨ - ç®€å•æµ‹è¯•</h1>
    
    <div class="info">
        <p><strong>æ­¥éª¤ 1ï¼šæ£€æŸ¥æ‰©å±•æ˜¯å¦åŠ è½½</strong></p>
        <p>æŒ‰ <code>F12</code> æ‰“å¼€æ§åˆ¶å°ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰ä»¥ä¸‹æ—¥å¿—ï¼š</p>
        <p><code>[Content Script] Network Analyzer loaded</code></p>
        <p>å¦‚æœæ²¡æœ‰çœ‹åˆ°è¿™ä¸ªæ—¥å¿—ï¼Œè¯´æ˜æ‰©å±•æ²¡æœ‰æ­£ç¡®æ³¨å…¥ã€‚</p>
    </div>
    
    <div class="info">
        <p><strong>æ­¥éª¤ 2ï¼šæ‰“å¼€ä¾§è¾¹æ </strong></p>
        <p>ç‚¹å‡»æµè§ˆå™¨å·¥å…·æ ä¸­çš„æ‰©å±•å›¾æ ‡ï¼Œç„¶åç‚¹å‡»"æ‰“å¼€ä¾§è¾¹æ "æŒ‰é’®ã€‚</p>
        <p>ä¾§è¾¹æ åº”è¯¥åœ¨é¡µé¢å³ä¾§æ‰“å¼€ã€‚</p>
    </div>
    
    <div class="info">
        <p><strong>æ­¥éª¤ 3ï¼šæµ‹è¯•è¯·æ±‚æ•è·</strong></p>
        <p>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®å‘é€ç½‘ç»œè¯·æ±‚ï¼Œç„¶åæŸ¥çœ‹ä¾§è¾¹æ æ˜¯å¦æ˜¾ç¤ºè¯·æ±‚ã€‚</p>
    </div>
    
    <div class="section">
        <h2>æµ‹è¯•æŒ‰é’®</h2>
        <button onclick="testFetch1()">æµ‹è¯• Fetch 1</button>
        <button onclick="testFetch2()">æµ‹è¯• Fetch 2</button>
        <button onclick="testXHR1()">æµ‹è¯• XHR 1</button>
        <button onclick="testXHR2()">æµ‹è¯• XHR 2</button>
    </div>
    
    <div class="section">
        <h2>æµ‹è¯•ç»“æœ</h2>
        <div id="testStatus" class="status">
            ç­‰å¾…æµ‹è¯•...
        </div>
    </div>
    
    <script>
        // æ£€æŸ¥æ‰©å±•æ˜¯å¦åŠ è½½
        setTimeout(() => {
            const hasNetworkAnalyzer = !!window.chrome?.runtime;
            const statusEl = document.getElementById('testStatus');
            
            if (hasNetworkAnalyzer) {
                statusEl.textContent = 'âœ… Chrome Runtime å¯ç”¨';
                statusEl.className = 'status success';
            } else {
                statusEl.textContent = 'âŒ Chrome Runtime ä¸å¯ç”¨';
                statusEl.className = 'status error';
            }
        }, 1000);
        
        // æµ‹è¯• Fetch 1
        async function testFetch1() {
            try {
                const response = await fetch('https://jsonplaceholder.typicode.com/users/1');
                const data = await response.json();
                console.log('Test Fetch 1 Success:', data);
                alert('âœ… Fetch 1 æµ‹è¯•æˆåŠŸï¼\n\nè¯·æŸ¥çœ‹ä¾§è¾¹æ æ˜¯å¦æ˜¾ç¤ºè¯·æ±‚ã€‚');
            } catch (error) {
                console.error('Test Fetch 1 Failed:', error);
                alert('âŒ Fetch 1 æµ‹è¯•å¤±è´¥ï¼š' + error.message);
            }
        }
        
        // æµ‹è¯• Fetch 2
        async function testFetch2() {
            try {
                const response = await fetch('https://jsonplaceholder.typicode.com/posts/1');
                const data = await response.json();
                console.log('Test Fetch 2 Success:', data);
                alert('âœ… Fetch 2 æµ‹è¯•æˆåŠŸï¼\n\nè¯·æŸ¥çœ‹ä¾§è¾¹æ æ˜¯å¦æ˜¾ç¤ºè¯·æ±‚ã€‚');
            } catch (error) {
                console.error('Test Fetch 2 Failed:', error);
                alert('âŒ Fetch 2 æµ‹è¯•å¤±è´¥ï¼š' + error.message);
            }
        }
        
        // æµ‹è¯• XHR 1
        function testXHR1() {
            const xhr = new XMLHttpRequest();
            xhr.open('GET', 'https://jsonplaceholder.typicode.com/users/2');
            xhr.onload = function() {
                const data = JSON.parse(xhr.responseText);
                console.log('Test XHR 1 Success:', data);
                alert('âœ… XHR 1 æµ‹è¯•æˆåŠŸï¼\n\nè¯·æŸ¥çœ‹ä¾§è¾¹æ æ˜¯å¦æ˜¾ç¤ºè¯·æ±‚ã€‚');
            };
            xhr.onerror = function() {
                console.error('Test XHR 1 Failed');
                alert('âŒ XHR 1 æµ‹è¯•å¤±è´¥');
            };
            xhr.send();
        }
        
        // æµ‹è¯• XHR 2
        function testXHR2() {
            const xhr = new XMLHttpRequest();
            xhr.open('GET', 'https://jsonplaceholder.typicode.com/posts/2');
            xhr.onload = function() {
                const data = JSON.parse(xhr.responseText);
                console.log('Test XHR 2 Success:', data);
                alert('âœ… XHR 2 æµ‹è¯•æˆåŠŸï¼\n\nè¯·æŸ¥çœ‹ä¾§è¾¹æ æ˜¯å¦æ˜¾ç¤ºè¯·æ±‚ã€‚');
            };
            xhr.onerror = function() {
                console.error('Test XHR 2 Failed');
                alert('âŒ XHR 2 æµ‹è¯•å¤±è´¥');
            };
            xhr.send();
        }
    </script>
</body>
</html>
